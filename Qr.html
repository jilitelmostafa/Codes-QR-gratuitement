<!DOCTYPE html>
<html lang="en" class=""><head><script>window.livecodes = window.livecodes || {};</script><title>Untitled Project</title><meta name="title" content="Untitled Project"><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"><style id="__livecodes_styles__"></style><script src="https://cdn.jsdelivr.net/npm/es-module-shims@1.10.0/dist/es-module-shims.js" async=""></script><script type="importmap">{
  "imports": {}
}</script></head><body>


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>المحول الشامل لأكواد QR - دعم جميع أنواع البيانات</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&amp;display=swap" rel="stylesheet">

<!-- QRCode Library -->
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Cairo', sans-serif;
    }

    body {
        background: linear-gradient(135deg, #1a2980, #26d0ce);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        color: #333;
    }

    .container {
        background: rgba(255, 255, 255, 0.95);
        padding: 30px;
        width: 100%;
        max-width: 900px;
        border-radius: 25px;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
        animation: fadeIn 1s ease;
        position: relative;
        overflow: hidden;
    }

    .container::before {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        width: 150px;
        height: 150px;
        background: linear-gradient(135deg, rgba(26, 41, 128, 0.1), rgba(38, 208, 206, 0.1));
        border-radius: 0 0 0 100%;
    }

    .header {
        text-align: center;
        margin-bottom: 30px;
        position: relative;
        z-index: 1;
    }

    .header h1 {
        color: #1a2980;
        font-size: 32px;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
    }

    .header p {
        color: #555;
        font-size: 16px;
        max-width: 700px;
        margin: 0 auto;
        line-height: 1.6;
    }

    .main-content {
        display: flex;
        flex-wrap: wrap;
        gap: 30px;
        position: relative;
        z-index: 1;
    }

    .input-section {
        flex: 1;
        min-width: 300px;
    }

    .output-section {
        flex: 1;
        min-width: 300px;
    }

    .data-type-selector {
        margin-bottom: 25px;
    }

    .data-type-selector h3 {
        color: #1a2980;
        margin-bottom: 15px;
        font-size: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .data-types {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        gap: 12px;
        margin-bottom: 20px;
    }

    .data-type-btn {
        background: #f0f4ff;
        border: 2px solid #d1dcff;
        border-radius: 12px;
        padding: 12px 10px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
        color: #1a2980;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
    }

    .data-type-btn:hover {
        background: #e1e8ff;
        transform: translateY(-3px);
    }

    .data-type-btn.active {
        background: #1a2980;
        color: white;
        border-color: #1a2980;
    }

    .data-type-btn i {
        font-size: 22px;
    }

    .data-type-btn span {
        font-size: 14px;
    }

    .input-group {
        margin-bottom: 25px;
    }

    .input-group h3 {
        color: #1a2980;
        margin-bottom: 15px;
        font-size: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .input-fields {
        background: #f8faff;
        padding: 25px;
        border-radius: 18px;
        border: 2px dashed #c8d4ff;
    }

    .field {
        margin-bottom: 20px;
    }

    .field:last-child {
        margin-bottom: 0;
    }

    .field label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: #1a2980;
        font-size: 15px;
    }

    .field input, .field textarea {
        width: 100%;
        padding: 14px;
        border: 2px solid #d1dcff;
        border-radius: 10px;
        font-size: 15px;
        transition: all 0.3s;
        background: white;
    }

    .field textarea {
        min-height: 120px;
        resize: vertical;
    }

    .field input:focus, .field textarea:focus {
        border-color: #1a2980;
        box-shadow: 0 0 0 3px rgba(26, 41, 128, 0.1);
        outline: none;
    }

    .buttons {
        display: flex;
        gap: 15px;
        margin-top: 25px;
    }

    button {
        flex: 1;
        padding: 16px;
        font-size: 17px;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
    }

    .generate-btn {
        background: linear-gradient(to right, #1a2980, #26d0ce);
        color: white;
    }

    .generate-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 7px 15px rgba(26, 41, 128, 0.3);
    }

    .clear-btn {
        background: #f0f4ff;
        color: #1a2980;
    }

    .clear-btn:hover {
        background: #e1e8ff;
        transform: translateY(-3px);
    }

    .download-btn {
        background: #2ecc71;
        color: white;
    }

    .download-btn:hover {
        background: #27ae60;
        transform: translateY(-3px);
    }

    .qr-output {
        background: #f8faff;
        padding: 30px;
        border-radius: 20px;
        border: 2px solid #c8d4ff;
        text-align: center;
        min-height: 400px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .qr-output-placeholder {
        color: #7a8ab8;
        font-size: 16px;
        text-align: center;
    }

    .qr-output-placeholder i {
        font-size: 70px;
        margin-bottom: 20px;
        color: #c8d4ff;
    }

    #qr-code-container {
        margin: 20px 0;
        padding: 20px;
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        display: inline-block;
    }

    #qr-code {
        margin: 0 auto;
    }

    .qr-data-preview {
        background: white;
        padding: 20px;
        border-radius: 15px;
        margin-top: 25px;
        text-align: right;
        border-right: 5px solid #26d0ce;
        max-height: 200px;
        overflow-y: auto;
    }

    .qr-data-preview h4 {
        color: #1a2980;
        margin-bottom: 15px;
        font-size: 18px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    #qr-data-text {
        color: #555;
        line-height: 1.6;
        font-size: 15px;
        word-break: break-word;
    }

    .action-buttons {
        display: flex;
        gap: 15px;
        margin-top: 25px;
        width: 100%;
    }

    .action-buttons button {
        padding: 12px;
        font-size: 15px;
    }

    .instructions {
        background: #e8f8ff;
        border-radius: 15px;
        padding: 20px;
        margin-top: 30px;
        text-align: right;
        border-right: 5px solid #26d0ce;
    }

    .instructions h3 {
        color: #1a2980;
        margin-bottom: 15px;
        font-size: 18px;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .instructions ol {
        padding-right: 20px;
        color: #555;
        line-height: 1.8;
    }

    .instructions li {
        margin-bottom: 8px;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    .pulse {
        animation: pulse 1.5s infinite;
    }

    .hidden {
        display: none !important;
    }

    /* Responsive design */
    @media (max-width: 768px) {
        .main-content {
            flex-direction: column;
        }
        
        .header h1 {
            font-size: 26px;
        }
        
        .data-types {
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        }
        
        .buttons, .action-buttons {
            flex-direction: column;
        }
    }
</style>



<div class="container">
    <div class="header">
        <h1><i class="fas fa-qrcode"></i> المحول الشامل لأكواد QR</h1>
        <p>أداة متكاملة لإنشاء أكواد QR لجميع أنواع البيانات: الروابط، جهات الاتصال، شبكات WiFi، البريد الإلكتروني، الدفع، وأكثر من ذلك</p>
    </div>

    <div class="main-content">
        <div class="input-section">
            <div class="data-type-selector">
                <h3><i class="fas fa-list-alt"></i> اختر نوع البيانات</h3>
                <div class="data-types">
                    <div class="data-type-btn active" data-type="url">
                        <i class="fas fa-link"></i>
                        <span>رابط URL</span>
                    </div>
                    <div class="data-type-btn" data-type="text">
                        <i class="fas fa-font"></i>
                        <span>نص عادي</span>
                    </div>
                    <div class="data-type-btn" data-type="phone">
                        <i class="fas fa-phone"></i>
                        <span>رقم هاتف</span>
                    </div>
                    <div class="data-type-btn" data-type="sms">
                        <i class="fas fa-sms"></i>
                        <span>رسالة نصية SMS</span>
                    </div>
                    <div class="data-type-btn" data-type="email">
                        <i class="fas fa-envelope"></i>
                        <span>بريد إلكتروني</span>
                    </div>
                    <div class="data-type-btn" data-type="wifi">
                        <i class="fas fa-wifi"></i>
                        <span>شبكة WiFi</span>
                    </div>
                    <div class="data-type-btn" data-type="vcard">
                        <i class="fas fa-address-card"></i>
                        <span>بطاقة اتصال vCard</span>
                    </div>
                    <div class="data-type-btn" data-type="mecard">
                        <i class="fas fa-id-card"></i>
                        <span>بطاقة MeCard</span>
                    </div>
                    <div class="data-type-btn" data-type="twitter">
                        <i class="fab fa-twitter"></i>
                        <span>Twitter</span>
                    </div>
                    <div class="data-type-btn" data-type="event">
                        <i class="fas fa-calendar-alt"></i>
                        <span>حدث تقويم</span>
                    </div>
                    <div class="data-type-btn" data-type="epc">
                        <i class="fas fa-euro-sign"></i>
                        <span>دفع EPC QR</span>
                    </div>
                    <div class="data-type-btn" data-type="whatsapp">
                        <i class="fab fa-whatsapp"></i>
                        <span>واتساب</span>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <h3><i class="fas fa-edit"></i> أدخل بياناتك</h3>
                <div class="input-fields">
                    <!-- URL Input -->
                    <div id="url-fields" class="field-group">
                        <div class="field">
                            <label for="url-input"><i class="fas fa-link"></i> رابط URL</label>
                            <input type="text" id="url-input" placeholder="https://www.example.com" value="https://www.example.com">
                        </div>
                    </div>

                    <!-- Text Input -->
                    <div id="text-fields" class="field-group hidden">
                        <div class="field">
                            <label for="text-input"><i class="fas fa-font"></i> النص</label>
                            <textarea id="text-input" placeholder="أدخل النص الذي تريد تحويله إلى رمز QR">مرحبا! هذا نص تجريبي لإنشاء رمز QR.</textarea>
                        </div>
                    </div>

                    <!-- Phone Input -->
                    <div id="phone-fields" class="field-group hidden">
                        <div class="field">
                            <label for="phone-input"><i class="fas fa-phone"></i> رقم الهاتف</label>
                            <input type="tel" id="phone-input" placeholder="+212612345678" value="+212612345678">
                        </div>
                    </div>

                    <!-- SMS Input -->
                    <div id="sms-fields" class="field-group hidden">
                        <div class="field">
                            <label for="sms-phone"><i class="fas fa-phone"></i> رقم الهاتف</label>
                            <input type="tel" id="sms-phone" placeholder="+212612345678" value="+212612345678">
                        </div>
                        <div class="field">
                            <label for="sms-message"><i class="fas fa-comment"></i> نص الرسالة</label>
                            <textarea id="sms-message" placeholder="نص الرسالة النصية">مرحبا، هذا رسالة تجريبية عبر QR Code!</textarea>
                        </div>
                    </div>

                    <!-- Email Input -->
                    <div id="email-fields" class="field-group hidden">
                        <div class="field">
                            <label for="email-to"><i class="fas fa-envelope"></i> عنوان البريد الإلكتروني</label>
                            <input type="email" id="email-to" placeholder="example@domain.com" value="example@domain.com">
                        </div>
                        <div class="field">
                            <label for="email-subject"><i class="fas fa-tag"></i> موضوع الرسالة</label>
                            <input type="text" id="email-subject" placeholder="موضوع الرسالة" value="مرحبا من رمز QR">
                        </div>
                        <div class="field">
                            <label for="email-body"><i class="fas fa-file-alt"></i> نص الرسالة</label>
                            <textarea id="email-body" placeholder="نص الرسالة">هذه رسالة تجريبية تم إنشاؤها باستخدام رمز QR.</textarea>
                        </div>
                    </div>

                    <!-- WiFi Input -->
                    <div id="wifi-fields" class="field-group hidden">
                        <div class="field">
                            <label for="wifi-ssid"><i class="fas fa-wifi"></i> اسم الشبكة (SSID)</label>
                            <input type="text" id="wifi-ssid" placeholder="اسم شبكة WiFi" value="MyWiFiNetwork">
                        </div>
                        <div class="field">
                            <label for="wifi-password"><i class="fas fa-key"></i> كلمة المرور</label>
                            <input type="text" id="wifi-password" placeholder="كلمة مرور WiFi" value="MyPassword123">
                        </div>
                        <div class="field">
                            <label for="wifi-type"><i class="fas fa-shield-alt"></i> نوع الحماية</label>
                            <select id="wifi-type" style="width:100%; padding:14px; border-radius:10px; border:2px solid #d1dcff;">
                                <option value="WPA">WPA/WPA2</option>
                                <option value="WEP">WEP</option>
                                <option value="nopass">بدون حماية</option>
                            </select>
                        </div>
                    </div>

                    <!-- vCard Input -->
                    <div id="vcard-fields" class="field-group hidden">
                        <div class="field">
                            <label for="vcard-name"><i class="fas fa-user"></i> الاسم الكامل</label>
                            <input type="text" id="vcard-name" placeholder="الاسم الأول واللقب" value="أحمد محمد">
                        </div>
                        <div class="field">
                            <label for="vcard-phone"><i class="fas fa-phone"></i> رقم الهاتف</label>
                            <input type="tel" id="vcard-phone" placeholder="رقم الهاتف" value="+212612345678">
                        </div>
                        <div class="field">
                            <label for="vcard-email"><i class="fas fa-envelope"></i> البريد الإلكتروني</label>
                            <input type="email" id="vcard-email" placeholder="البريد الإلكتروني" value="ahmed@example.com">
                        </div>
                        <div class="field">
                            <label for="vcard-org"><i class="fas fa-building"></i> المؤسسة/الشركة</label>
                            <input type="text" id="vcard-org" placeholder="اسم المؤسسة" value="شركة التقنية المحدودة">
                        </div>
                        <div class="field">
                            <label for="vcard-title"><i class="fas fa-briefcase"></i> المسمى الوظيفي</label>
                            <input type="text" id="vcard-title" placeholder="المسمى الوظيفي" value="مدير تقنية المعلومات">
                        </div>
                        <div class="field">
                            <label for="vcard-website"><i class="fas fa-globe"></i> الموقع الإلكتروني</label>
                            <input type="text" id="vcard-website" placeholder="الموقع الإلكتروني" value="https://www.example.com">
                        </div>
                    </div>

                    <!-- MeCard Input -->
                    <div id="mecard-fields" class="field-group hidden">
                        <div class="field">
                            <label for="mecard-name"><i class="fas fa-user"></i> الاسم</label>
                            <input type="text" id="mecard-name" placeholder="الاسم" value="أحمد محمد">
                        </div>
                        <div class="field">
                            <label for="mecard-phone"><i class="fas fa-phone"></i> رقم الهاتف</label>
                            <input type="tel" id="mecard-phone" placeholder="رقم الهاتف" value="+212612345678">
                        </div>
                        <div class="field">
                            <label for="mecard-email"><i class="fas fa-envelope"></i> البريد الإلكتروني</label>
                            <input type="email" id="mecard-email" placeholder="البريد الإلكتروني" value="ahmed@example.com">
                        </div>
                        <div class="field">
                            <label for="mecard-address"><i class="fas fa-home"></i> العنوان</label>
                            <input type="text" id="mecard-address" placeholder="العنوان" value="الدار البيضاء، المغرب">
                        </div>
                    </div>

                    <!-- Twitter Input -->
                    <div id="twitter-fields" class="field-group hidden">
                        <div class="field">
                            <label for="twitter-username"><i class="fab fa-twitter"></i> اسم المستخدم</label>
                            <input type="text" id="twitter-username" placeholder="@username" value="@example_user">
                        </div>
                        <div class="field">
                            <label for="twitter-tweet"><i class="fas fa-comment"></i> نص التغريدة (اختياري)</label>
                            <textarea id="twitter-tweet" placeholder="نص التغريدة">تغريدة تجريبية من رمز QR!</textarea>
                        </div>
                    </div>

                    <!-- Event Input -->
                    <div id="event-fields" class="field-group hidden">
                        <div class="field">
                            <label for="event-title"><i class="fas fa-heading"></i> عنوان الحدث</label>
                            <input type="text" id="event-title" placeholder="عنوان الحدث" value="اجتماع فريق العمل">
                        </div>
                        <div class="field">
                            <label for="event-start"><i class="fas fa-calendar"></i> تاريخ ووقت البدء</label>
                            <input type="datetime-local" id="event-start" value="2024-12-31T14:00">
                        </div>
                        <div class="field">
                            <label for="event-end"><i class="fas fa-calendar-times"></i> تاريخ ووقت الانتهاء</label>
                            <input type="datetime-local" id="event-end" value="2024-12-31T16:00">
                        </div>
                        <div class="field">
                            <label for="event-location"><i class="fas fa-map-marker-alt"></i> المكان</label>
                            <input type="text" id="event-location" placeholder="مكان الحدث" value="قاعة المؤتمرات، المبنى الرئيسي">
                        </div>
                        <div class="field">
                            <label for="event-description"><i class="fas fa-file-alt"></i> الوصف</label>
                            <textarea id="event-description" placeholder="وصف الحدث">مناقشة خطط العمل للربع القادم وتقييم الأداء.</textarea>
                        </div>
                    </div>

                    <!-- EPC QR Input -->
                    <div id="epc-fields" class="field-group hidden">
                        <div class="field">
                            <label for="epc-name"><i class="fas fa-user"></i> اسم المستلم</label>
                            <input type="text" id="epc-name" placeholder="اسم المستلم" value="شركة التقنية المحدودة">
                        </div>
                        <div class="field">
                            <label for="epc-iban"><i class="fas fa-credit-card"></i> رقم IBAN</label>
                            <input type="text" id="epc-iban" placeholder="IBAN" value="MA6401234567890123456789012">
                        </div>
                        <div class="field">
                            <label for="epc-amount"><i class="fas fa-money-bill-wave"></i> المبلغ (باليورو)</label>
                            <input type="number" id="epc-amount" placeholder="0.00" step="0.01" value="100.00">
                        </div>
                        <div class="field">
                            <label for="epc-reference"><i class="fas fa-hashtag"></i> المرجع (اختياري)</label>
                            <input type="text" id="epc-reference" placeholder="المرجع" value="INV-2024-001">
                        </div>
                        <div class="field">
                            <label for="epc-purpose"><i class="fas fa-sticky-note"></i> الغرض (اختياري)</label>
                            <input type="text" id="epc-purpose" placeholder="الغرض من الدفع" value="دفع فاتورة">
                        </div>
                    </div>

                    <!-- WhatsApp Input -->
                    <div id="whatsapp-fields" class="field-group hidden">
                        <div class="field">
                            <label for="whatsapp-phone"><i class="fab fa-whatsapp"></i> رقم واتساب</label>
                            <input type="tel" id="whatsapp-phone" placeholder="رقم الهاتف مع رمز الدولة" value="+212612345678">
                        </div>
                        <div class="field">
                            <label for="whatsapp-message"><i class="fas fa-comment"></i> الرسالة (اختياري)</label>
                            <textarea id="whatsapp-message" placeholder="نص الرسالة">مرحبا، أريد التواصل معك!</textarea>
                        </div>
                    </div>
                </div>
            </div>

            <div class="buttons">
                <button class="generate-btn" onclick="generateQR()">
                    <i class="fas fa-bolt"></i> إنشاء رمز QR
                </button>
                <button class="clear-btn" onclick="clearAll()">
                    <i class="fas fa-broom"></i> مسح الكل
                </button>
            </div>
        </div>

        <div class="output-section">
            <div class="qr-output">
                <div class="qr-output-placeholder" id="qr-placeholder">
                    <i class="fas fa-qrcode"></i>
                    <p>سيظهر رمز QR هنا بعد إدخال البيانات</p>
                    <p>اختر نوع البيانات وأدخل المعلومات ثم انقر على "إنشاء رمز QR"</p>
                </div>
                
                <div id="qr-output-content" class="hidden">
                    <div id="qr-code-container">
                        <div id="qr-code"></div>
                    </div>
                    
                    <div class="qr-data-preview">
                        <h4><i class="fas fa-info-circle"></i> البيانات المضمنة:</h4>
                        <div id="qr-data-text"></div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="download-btn" onclick="downloadQR()">
                            <i class="fas fa-download"></i> تحميل QR
                        </button>
                        <button class="clear-btn" onclick="clearQR()">
                            <i class="fas fa-times"></i> مسح QR
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="instructions">
        <h3><i class="fas fa-graduation-cap"></i> كيفية الاستخدام</h3>
        <ol>
            <li>اختر نوع البيانات التي تريد تحويلها إلى رمز QR من القائمة أعلاه</li>
            <li>أدخل البيانات المطلوبة في الحقول المناسبة</li>
            <li>انقر على زر "إنشاء رمز QR" لإنشاء الرمز</li>
            <li>استخدم زر "تحميل QR" لحفظ الصورة على جهازك</li>
            <li>يمكنك مشاركة رمز QR مع الآخرين لمسحه ضوئياً باستخدام كاميرا الهاتف</li>
        </ol>
    </div>
</div>

<script>
let currentDataType = 'url';
let currentQRCode = null;

// تهيئة التواريخ في حقول الأحداث
document.addEventListener('DOMContentLoaded', function() {
    const now = new Date();
    const futureDate = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000); // بعد أسبوع
    
    document.getElementById('event-start').value = formatDateTimeLocal(now);
    document.getElementById('event-end').value = formatDateTimeLocal(futureDate);
    
    // إضافة مستمعين لأزرار أنواع البيانات
    document.querySelectorAll('.data-type-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            // إزالة النشاط من جميع الأزرار
            document.querySelectorAll('.data-type-btn').forEach(b => b.classList.remove('active'));
            // إضافة النشاط للزر المحدد
            this.classList.add('active');
            
            // تغيير نوع البيانات
            const dataType = this.getAttribute('data-type');
            switchDataType(dataType);
        });
    });
    
    // إنشاء رمز QR أولي عند التحميل
    setTimeout(generateQR, 500);
});

function formatDateTimeLocal(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    const hours = String(date.getHours()).padStart(2, '0');
    const minutes = String(date.getMinutes()).padStart(2, '0');
    
    return `${year}-${month}-${day}T${hours}:${minutes}`;
}

function switchDataType(type) {
    currentDataType = type;
    
    // إخفاء جميع حقول الإدخال
    document.querySelectorAll('.field-group').forEach(group => {
        group.classList.add('hidden');
    });
    
    // إظهار حقول الإدخال المناسبة
    document.getElementById(`${type}-fields`).classList.remove('hidden');
}

function generateQR() {
    let qrData = '';
    let displayText = '';
    
    // بناء بيانات QR بناءً على نوع البيانات المحدد
    switch(currentDataType) {
        case 'url':
            let url = document.getElementById('url-input').value.trim();
            if (!url) {
                showMessage('الرجاء إدخال رابط URL', 'error');
                return;
            }
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }
            qrData = url;
            displayText = `الرابط: ${url}`;
            break;
            
        case 'text':
            const text = document.getElementById('text-input').value.trim();
            if (!text) {
                showMessage('الرجاء إدخال نص', 'error');
                return;
            }
            qrData = text;
            displayText = `النص: ${text.substring(0, 100)}${text.length > 100 ? '...' : ''}`;
            break;
            
        case 'phone':
            const phone = document.getElementById('phone-input').value.trim();
            if (!phone) {
                showMessage('الرجاء إدخال رقم هاتف', 'error');
                return;
            }
            qrData = `tel:${phone}`;
            displayText = `رقم الهاتف: ${phone}`;
            break;
            
        case 'sms':
            const smsPhone = document.getElementById('sms-phone').value.trim();
            const smsMessage = document.getElementById('sms-message').value.trim();
            if (!smsPhone) {
                showMessage('الرجاء إدخال رقم هاتف', 'error');
                return;
            }
            qrData = `smsto:${smsPhone}:${smsMessage}`;
            displayText = `رسالة SMS إلى: ${smsPhone}\nالنص: ${smsMessage.substring(0, 50)}${smsMessage.length > 50 ? '...' : ''}`;
            break;
            
        case 'email':
            const emailTo = document.getElementById('email-to').value.trim();
            const emailSubject = document.getElementById('email-subject').value.trim();
            const emailBody = document.getElementById('email-body').value.trim();
            if (!emailTo) {
                showMessage('الرجاء إدخال عنوان بريد إلكتروني', 'error');
                return;
            }
            qrData = `mailto:${emailTo}?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
            displayText = `إلى: ${emailTo}\nالموضوع: ${emailSubject}\nالنص: ${emailBody.substring(0, 50)}${emailBody.length > 50 ? '...' : ''}`;
            break;
            
        case 'wifi':
            const ssid = document.getElementById('wifi-ssid').value.trim();
            const password = document.getElementById('wifi-password').value.trim();
            const wifiType = document.getElementById('wifi-type').value;
            if (!ssid) {
                showMessage('الرجاء إدخال اسم الشبكة (SSID)', 'error');
                return;
            }
            qrData = `WIFI:S:${ssid};T:${wifiType};P:${password};;`;
            displayText = `شبكة WiFi: ${ssid}\nنوع الحماية: ${wifiType}\nكلمة المرور: ${password}`;
            break;
            
        case 'vcard':
            const vcardName = document.getElementById('vcard-name').value.trim();
            const vcardPhone = document.getElementById('vcard-phone').value.trim();
            const vcardEmail = document.getElementById('vcard-email').value.trim();
            const vcardOrg = document.getElementById('vcard-org').value.trim();
            const vcardTitle = document.getElementById('vcard-title').value.trim();
            const vcardWebsite = document.getElementById('vcard-website').value.trim();
            
            if (!vcardName) {
                showMessage('الرجاء إدخال الاسم', 'error');
                return;
            }
            
            qrData = `BEGIN:VCARD\nVERSION:3.0\nFN:${vcardName}\nTEL:${vcardPhone}\nEMAIL:${vcardEmail}\nORG:${vcardOrg}\nTITLE:${vcardTitle}\nURL:${vcardWebsite}\nEND:VCARD`;
            displayText = `بطاقة اتصال: ${vcardName}\nالهاتف: ${vcardPhone}\nالبريد: ${vcardEmail}\nالشركة: ${vcardOrg}\nالمسمى: ${vcardTitle}\nالموقع: ${vcardWebsite}`;
            break;
            
        case 'mecard':
            const mecardName = document.getElementById('mecard-name').value.trim();
            const mecardPhone = document.getElementById('mecard-phone').value.trim();
            const mecardEmail = document.getElementById('mecard-email').value.trim();
            const mecardAddress = document.getElementById('mecard-address').value.trim();
            
            if (!mecardName) {
                showMessage('الرجاء إدخال الاسم', 'error');
                return;
            }
            
            qrData = `MECARD:N:${mecardName};TEL:${mecardPhone};EMAIL:${mecardEmail};ADR:${mecardAddress};;`;
            displayText = `بطاقة MeCard: ${mecardName}\nالهاتف: ${mecardPhone}\nالبريد: ${mecardEmail}\nالعنوان: ${mecardAddress}`;
            break;
            
        case 'twitter':
            const twitterUsername = document.getElementById('twitter-username').value.trim();
            const twitterTweet = document.getElementById('twitter-tweet').value.trim();
            
            if (!twitterUsername) {
                showMessage('الرجاء إدخال اسم مستخدم Twitter', 'error');
                return;
            }
            
            const cleanUsername = twitterUsername.replace('@', '');
            if (twitterTweet) {
                qrData = `https://twitter.com/intent/tweet?text=${encodeURIComponent(twitterTweet)}`;
                displayText = `Twitter: نشر تغريدة باسم ${cleanUsername}\nالتغريدة: ${twitterTweet.substring(0, 50)}${twitterTweet.length > 50 ? '...' : ''}`;
            } else {
                qrData = `https://twitter.com/${cleanUsername}`;
                displayText = `Twitter: ملف ${cleanUsername}`;
            }
            break;
            
        case 'event':
            const eventTitle = document.getElementById('event-title').value.trim();
            const eventStart = document.getElementById('event-start').value;
            const eventEnd = document.getElementById('event-end').value;
            const eventLocation = document.getElementById('event-location').value.trim();
            const eventDescription = document.getElementById('event-description').value.trim();
            
            if (!eventTitle) {
                showMessage('الرجاء إدخال عنوان الحدث', 'error');
                return;
            }
            
            // تحويل التواريخ إلى تنسيق iCalendar
            const startDate = new Date(eventStart);
            const endDate = new Date(eventEnd);
            
            const formatDate = (date) => {
                return date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
            };
            
            qrData = `BEGIN:VEVENT\nSUMMARY:${eventTitle}\nDTSTART:${formatDate(startDate)}\nDTEND:${formatDate(endDate)}\nLOCATION:${eventLocation}\nDESCRIPTION:${eventDescription}\nEND:VEVENT`;
            displayText = `الحدث: ${eventTitle}\nالبدء: ${startDate.toLocaleString()}\nالانتهاء: ${endDate.toLocaleString()}\nالمكان: ${eventLocation}\nالوصف: ${eventDescription.substring(0, 50)}${eventDescription.length > 50 ? '...' : ''}`;
            break;
            
        case 'epc':
            const epcName = document.getElementById('epc-name').value.trim();
            const epcIban = document.getElementById('epc-iban').value.trim();
            const epcAmount = document.getElementById('epc-amount').value.trim();
            const epcReference = document.getElementById('epc-reference').value.trim();
            const epcPurpose = document.getElementById('epc-purpose').value.trim();
            
            if (!epcName || !epcIban) {
                showMessage('الرجاء إدخال اسم المستلم ورقم IBAN', 'error');
                return;
            }
            
            qrData = `BCD\n002\n1\nSCT\n\n${epcName}\n${epcIban}\nEUR${epcAmount}\n\n\n${epcReference}\n${epcPurpose}`;
            displayText = `دفع EPC QR\nالمستلم: ${epcName}\nIBAN: ${epcIban}\nالمبلغ: ${epcAmount} يورو\nالمرجع: ${epcReference}\nالغرض: ${epcPurpose}`;
            break;
            
        case 'whatsapp':
            const whatsappPhone = document.getElementById('whatsapp-phone').value.trim();
            const whatsappMessage = document.getElementById('whatsapp-message').value.trim();
            
            if (!whatsappPhone) {
                showMessage('الرجاء إدخال رقم واتساب', 'error');
                return;
            }
            
            const cleanPhone = whatsappPhone.replace('+', '').replace(/\s/g, '');
            if (whatsappMessage) {
                qrData = `https://wa.me/${cleanPhone}?text=${encodeURIComponent(whatsappMessage)}`;
                displayText = `واتساب: ${whatsappPhone}\nالرسالة: ${whatsappMessage.substring(0, 50)}${whatsappMessage.length > 50 ? '...' : ''}`;
            } else {
                qrData = `https://wa.me/${cleanPhone}`;
                displayText = `واتساب: ${whatsappPhone}`;
            }
            break;
    }
    
    // تحديث نص العرض
    document.getElementById('qr-data-text').textContent = displayText;
    
    // إنشاء رمز QR
    const qrCodeDiv = document.getElementById('qr-code');
    qrCodeDiv.innerHTML = '';
    
    // إضافة مؤشر تحميل
    qrCodeDiv.innerHTML = '<div style="padding:30px;"><i class="fas fa-spinner fa-spin fa-3x" style="color:#1a2980;"></i></div>';
    
    // إظهار منطقة الإخراج وإخفاء العنصر النائب
    document.getElementById('qr-placeholder').classList.add('hidden');
    document.getElementById('qr-output-content').classList.remove('hidden');
    
    // إنشاء رمز QR بعد تأخير قصير للتأثير البصري
    setTimeout(() => {
        QRCode.toCanvas(qrData, { 
            width: 220,
            margin: 2,
            color: {
                dark: "#000000",
                light: "#ffffff"
            },
            errorCorrectionLevel: 'H'
        }, function (err, canvas) {
            if (err) {
                console.error(err);
                showMessage('حدث خطأ أثناء إنشاء رمز QR', 'error');
                qrCodeDiv.innerHTML = '<div style="color:#e74c3c; padding:20px;"><i class="fas fa-exclamation-triangle fa-2x"></i><p>فشل في إنشاء رمز QR</p></div>';
                return;
            }
            
            qrCodeDiv.innerHTML = '';
            qrCodeDiv.appendChild(canvas);
            currentQRCode = canvas;
            
            // إضافة تأثير النبض
            canvas.classList.add('pulse');
            setTimeout(() => {
                canvas.classList.remove('pulse');
            }, 3000);
            
            showMessage('تم إنشاء رمز QR بنجاح!', 'success');
        });
    }, 500);
}

function downloadQR() {
    if (!currentQRCode) {
        showMessage('لا يوجد رمز QR لتحميله', 'error');
        return;
    }
    
    const link = document.createElement('a');
    link.download = `QR-Code-${currentDataType}-${new Date().getTime()}.png`;
    link.href = currentQRCode.toDataURL('image/png');
    link.click();
    
    showMessage('تم تحميل رمز QR بنجاح', 'success');
}

function clearQR() {
    document.getElementById('qr-placeholder').classList.remove('hidden');
    document.getElementById('qr-output-content').classList.add('hidden');
    document.getElementById('qr-code').innerHTML = '';
    currentQRCode = null;
    
    showMessage('تم مسح رمز QR', 'info');
}

function clearAll() {
    // مسح جميع حقول الإدخال
    document.querySelectorAll('input, textarea').forEach(field => {
        if (field.type !== 'button' && field.type !== 'submit') {
            field.value = '';
        }
    });
    
    // إعادة تعيين إلى نوع البيانات الافتراضي
    document.querySelectorAll('.data-type-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelector('[data-type="url"]').classList.add('active');
    switchDataType('url');
    
    // إعادة تعيين القيم الافتراضية
    document.getElementById('url-input').value = 'https://www.example.com';
    document.getElementById('text-input').value = 'مرحبا! هذا نص تجريبي لإنشاء رمز QR.';
    document.getElementById('phone-input').value = '+212612345678';
    document.getElementById('sms-phone').value = '+212612345678';
    document.getElementById('sms-message').value = 'مرحبا، هذا رسالة تجريبية عبر QR Code!';
    document.getElementById('email-to').value = 'example@domain.com';
    document.getElementById('email-subject').value = 'مرحبا من رمز QR';
    document.getElementById('email-body').value = 'هذه رسالة تجريبية تم إنشاؤها باستخدام رمز QR.';
    document.getElementById('wifi-ssid').value = 'MyWiFiNetwork';
    document.getElementById('wifi-password').value = 'MyPassword123';
    document.getElementById('vcard-name').value = 'أحمد محمد';
    document.getElementById('vcard-phone').value = '+212612345678';
    document.getElementById('vcard-email').value = 'ahmed@example.com';
    document.getElementById('vcard-org').value = 'شركة التقنية المحدودة';
    document.getElementById('vcard-title').value = 'مدير تقنية المعلومات';
    document.getElementById('vcard-website').value = 'https://www.example.com';
    document.getElementById('mecard-name').value = 'أحمد محمد';
    document.getElementById('mecard-phone').value = '+212612345678';
    document.getElementById('mecard-email').value = 'ahmed@example.com';
    document.getElementById('mecard-address').value = 'الدار البيضاء، المغرب';
    document.getElementById('twitter-username').value = '@example_user';
    document.getElementById('twitter-tweet').value = 'تغريدة تجريبية من رمز QR!';
    document.getElementById('event-title').value = 'اجتماع فريق العمل';
    
    const now = new Date();
    const futureDate = new Date(now.getTime() + 7 * 24 * 60 * 60 * 1000);
    document.getElementById('event-start').value = formatDateTimeLocal(now);
    document.getElementById('event-end').value = formatDateTimeLocal(futureDate);
    
    document.getElementById('event-location').value = 'قاعة المؤتمرات، المبنى الرئيسي';
    document.getElementById('event-description').value = 'مناقشة خطط العمل للربع القادم وتقييم الأداء.';
    document.getElementById('epc-name').value = 'شركة التقنية المحدودة';
    document.getElementById('epc-iban').value = 'MA6401234567890123456789012';
    document.getElementById('epc-amount').value = '100.00';
    document.getElementById('epc-reference').value = 'INV-2024-001';
    document.getElementById('epc-purpose').value = 'دفع فاتورة';
    document.getElementById('whatsapp-phone').value = '+212612345678';
    document.getElementById('whatsapp-message').value = 'مرحبا، أريد التواصل معك!';
    
    // مسح رمز QR
    clearQR();
    
    showMessage('تم مسح جميع البيانات', 'info');
}

function showMessage(text, type) {
    // إزالة أي رسائل سابقة
    const existingMessage = document.querySelector('.message-toast');
    if (existingMessage) {
        existingMessage.remove();
    }
    
    // تحديد لون الرسالة حسب النوع
    let bgColor, icon;
    if (type === 'success') {
        bgColor = '#2ecc71';
        icon = 'fa-check-circle';
    } else if (type === 'error') {
        bgColor = '#e74c3c';
        icon = 'fa-exclamation-circle';
    } else {
        bgColor = '#3498db';
        icon = 'fa-info-circle';
    }
    
    // إنشاء عنصر الرسالة
    const message = document.createElement('div');
    message.className = 'message-toast';
    message.innerHTML = `
        <i class="fas ${icon}"></i>
        <span>${text}</span>
    `;
    
    // إضافة الأنماط الديناميكية
    message.style.cssText = `
        position: fixed;
        top: 30px;
        left: 50%;
        transform: translateX(-50%) translateY(-20px);
        background: ${bgColor};
        color: white;
        padding: 15px 25px;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        display: flex;
        align-items: center;
        gap: 12px;
        z-index: 10000;
        opacity: 0;
        animation: messageFadeIn 0.5s forwards, messageFadeOut 0.5s forwards 2.5s;
        font-weight: 600;
        max-width: 90%;
    `;
    
    // إضافة الرسالة إلى الصفحة
    document.body.appendChild(message);
    
    // إزالة الرسالة بعد 3 ثوانٍ
    setTimeout(() => {
        if (message.parentNode) {
            message.remove();
        }
    }, 3000);
}

// إضافة أنماط CSS للرسائل العائمة
const style = document.createElement('style');
style.textContent = `
    @keyframes messageFadeIn {
        from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
        to { opacity: 1; transform: translateX(-50%) translateY(0); }
    }
    
    @keyframes messageFadeOut {
        from { opacity: 1; transform: translateX(-50%) translateY(0); }
        to { opacity: 0; transform: translateX(-50%) translateY(-20px); }
    }
`;
document.head.appendChild(style);
</script>

<script></script></body></html>
